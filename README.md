# Πρακτική άσκηση -  Safecity Project 
#### Πανεπιστήμιο : Ιόνιο Πανεπιστήμιο 

#### Τμήμα : Πληροφορικής 

#### Ονοματεπώνυμο:   Τζουρμανάς Δημήτρης 

#### GitHub Profile:[TZOYRMANAS](https://github.com/TZOYRMANAS)

#### Organization: SpaceHellas 

#### ΑΜ:  Π2018140

## 1η εβδομάδα  

### Α.  

Αρχικά , μιλήσαμε για το αντικείμενο με το οποίο θα ασχοληθώ . Η βασική λειτουργία που θα επιτελεί το project είναι να δημιουργηθεί ένα  software ,το οποίο θα τοποθετείται σε φανάρια και θα κάνει scan σε όποιο αμάξι διαθέτει bluetooth device και θα  περνάει από το εύρος ζώνης του . Το project θα τρέχει σε Raspberry Pi με την χρήση του Virtual box . Η βασική λειτουργία του  θα επιτυγχάνεται με την χρησιμοποιήσει Python scripts . Ακόμη , θα γίνει χρήση VPNs για ασφαλή μεταφορά δεδομένων(encryption) και με την χρήση Docker container θα κάνουμε deploy σε πολλά μηχανήματα .Η σχέση της πρακτικής άσκησης με την εφαρμογή είναι στο να μπορεί το raspberry OS να βρει και αυτό Bluetooth devices . 

### Β.  

Στην συνέχεια εγκατέστησα τα πρώτα εργαλεία μου . 

-   Εγκατάσταση Oracle VM VirtualBox Manager 

-  Εγκατάσταση Raspberry Pi Desktop και σύνδεση με το VM( linux ,Debian (64 bit))  

- Εγκατάσταση Python  και του Visual Studio Code on Raspberry Pi  

- Εγκατάσταση VNC server στο rashberry Pi και  install 2 mobile app (nRF connect , LightBlue ) 

 

### C. 
Επίσης ,ασχολήθηκα με την λειτουργία των παρακάτω λειτουργιών για να καταλάβω την χρήση τους ,καθώς θα τα χρησιμοποιήσουμε στην υλοποίηση του project  : 

- Λειτουργία BLE  

- VPNs 

- Docker containers  

- BLE tags -BLE gateaways  

- EchoBeacon 

 

 ## 2η εβδομάδα  

  ### A. 

  Στην συνέχεια της πρακτικής μου ήρθα σε επαφή με την ανάλυση απαιτήσεων των χρηστών του project , προσδιορίζοντας τους βασικούς σκοπούς και το αντικείμενο που θα απασχολεί . Παρακάτω παρουσιάζεται περιληπτικά το ερευνητικό κομμάτι που έγινε .  

   Η εταιρεία αναπτύσσει μέσα από ένα ερευνητικό πρόγραμμα μία εφαρμογή για ασφαλείς πόλεις και εγώ έκανα κάποια τεστ επάνω στην εφαρμογή που ήταν για εσωτερική χρήση .Το συγκεκριμένο πρόγραμμα ,προωθεί την ανάπτυξη ολοκληρωμένων εφαρμογών για την αύξηση της ασφάλειας στις πόλεις .  Επίσης ,είδα πως έγινε η κατηγοριοποίηση  των  απαιτήσεων  βάση κάποιων κριτηρίων που έχει ορίσει η εταιρία , ο ορισμός του νομικού  πλαισίου που θα βασίζεται το σύστημα μας για την ασφάλεια των δεδομένων των χρηστών και τις ενέργειες που έχει δικαίωμα να κάνει για να διασφαλίσει την ιδιωτικότητα του  . Ακόμη ,μελέτησα πως ορίζονται  τύποι χρηστών ενός ερευνητικού προγράμματος  και πως μπορούμε να  αναλύσουμε την λειτουργία και την  αρχιτεκτονική των στοιχείων που θα εφαρμοστεί στην ανάπτυξη του συστήματος .      

 ### Β.  

- Παρακολούθηση παρουσίασης για την ιδιωτικότητα των      πληροφοριών και την επιχειρησιακή συνέχεια  

- Εγκατάσταση VPN Zerotier στο VM και ενεργοποίηση του - γενική  λειτουργία VPN . 

- Λειτουργία snapshots και clones στο virtual box  

 - Λειτουργία των mobile applications –  Mirror screening μεταξύ κινητού και PC 

-  Pybluez library  

- Python scripts , τα οποία κάνουν scan για bluetooth devices και BLE, δοκιμάζοντας τα και στο VM   

 ## 3η εβδομάδα 

 ### A. VNC server  

  Επειδή , αντιμετωπίσαμε ένα πρόβλημα με την λειτουργία του Real vnc ,καθώς συνδεόταν μόνο μέσω licensing ,πράγμα το οποίο δεν το θέλαμε ,καθώς θέλουμε να συνδέεται χωρίς λογαριασμό για να υπάρχει ελεύθερη πρόσβαση από όλους  .Για αυτό τον λόγο, εγκαταστέστησα  το tight vnc  server   ,το οποίο αρχικά  τρέχει στο rashberry:1 ,στο virtual session δηλαδή, όμως δεν έχει λειτουργικό περιβάλλον .Έπειτα ,προσπάθησα να το τρέξω στο session  raspberry:0 , αλλά  δεν είχα αποτέλεσμα. 

 Στην συνέχεια ,μετά από αρκετές δοκιμές  εγκατέστησα το lxde Desktop και το έκανα start  ,το όποιο μου τρέχει μόνο στο raspberry:1 . 
 

## 4η εβδομάδα  

### Α.
Έπειτα έκανα insert την βιβλιοθήκη bluetooth στον κώδικα μου  και εμφάνισα τα αποτελέσματα που βρίσκουν τα python scripts που σαρώνουν για  bluetooth   και BLE συσκευών  και ταυτόχρονα να εμφανίζει την  ώρα και την τοποθεσία  . 

   Όσων αφορά την αποθήκευση των αποτελεσμάτων στο αρχείο ,αρχικά τα εμφάνισα σε .txt αρχείο ,εμφανίζοντας τα σε multi –line μορφή , πράγμα το οποίο σημαίνει ότι είναι δύσκολο να γίνουν parsing και specialize από μία άλλη εφαρμογή ή οτιδήποτε άλλο . Επομένως , χρησιμοποίησα δύο διαφορετικά format δεδομένων , τα οποία αποθηκεύουν δομημένα τα δεδομένα και τα κάνουν πιο εύκολα προς επεξεργασία και αποθήκευση  . Ο ένας τρόπος είναι να αποθηκεύσω σε json file και o άλλος σε csv αρχείο με την χρήση seperator (tab) .  

    Για την εύρεση της  τοποθεσίας και της ώρας  εγκατέστησα την βιβλιοθήκη geocoder , η οποία με την χρήση της IP διεύθυνσης βρίσκει τις συντεταγμένες της τοποθεσίας του υπολογιστή . Για την ανίχνευση της ώρας κάναμε import την βιβλιοθήκη datetime . 

### B.  

  - Λειτουργία web APIs  

  - Parsing 

  - Specialize object 

### C. Αποτελέσματα .csv file  

 
![MicrosoftTeams-image (1)](https://github.com/TZOYRMANAS/Bluetooth_Device_LocationMap--/assets/79106646/0530efc4-49be-423b-b49a-853091d18dd1)


### D. Αποτελέσματα .json file  


##  5η εβδομάδα - 8η εβδομάδα  

 

  Το επόμενο βήμα που πραγματοποίησα είναι η δημιουργία μιας μικρής ιστοσελίδας  , η οποία να έχει έναν χάρτη ,διαβάζοντας το παραπάνω json αρχείο και να εμφανίζει την τοποθεσία των συσκευών που ανιχνεύονται .Πιο συγκεκριμένα , η εφαρμογή αποτελείται από δύο μέρη ,τόσο το back end όσο και το front end ,τα οποία  τρέχουν στον ίδιο directory και επικοινωνούν μέσω των routes . Επίσης , εγκατέστησα τον apache server για την καλύτερη διαχείριση των http αιτημάτων. 

## A. Back-end  

   Αρχικά , για την δημιουργία του back-end : 

- εγκατέστησα  ένα web framework της python το Flask , το οποίο μας βοηθάει στην ανάπτυξη εφαρμογών  , καθώς υποστηρίζει δρομολόγηση , http μεθόδους (get , post κλπ) ,δημιουργία  routes και γενικότερα συμβάλει  στην επεξεργασία των δεδομένων και την επικοινωνία με τον browser   

- δημιούργησα δυο routes .Ένα ,‘/’ , το οποίο μου επιστρέφει την index.html με την συμβολή της  render_template  και το  route ‘ /get_data ’  , όπου επιστρέφει τα δεδομένα του JSON που περιέχουν τις θέσεις των συσκευών μέσω της jsonify. 



## B.Front-end 

 Για  το front-end τμήμα της εφαρμογής μου χρησιμοποίησα : 

- html/Javascript  

- χρησιμοποίησα την βιβλιοθήκη της  Javascript  leaflet , η οποία μας βοηθάει για την δημιουργία του δια δραστικού χάρτη .Στην συνέχεια , δημιούργησα τον openstreetmap  

- μέσω της μεθόδου fetch() , κάνουμε αίτηση  στον route ‘ /get_data ’ του back end για να λάβουμε τα json δεδομένα  

- Δημιούργησα  για κάθε συσκευή που ανιχνεύεται  έναν marker και ένα popup με το όνομα της συσκευής  .  

## C.Apache Server – mod_wsgi 

  Εγκατέστησα τον Apache server για να την διαχείριση των http αιτημάτων από τον browser των χρηστών προς το back end (flask app).Δηλαδή , τα  request των χρηστών γίνονται μέσω των url που αναζητούν στον browser ,  από εκεί  πάνε στον server και στην συνέχεια στο Flask back-end. Εκεί ,επεξεργάζονται τα δεδομένα και ξανά στέλνονται στον server ,όπου τα προωθεί στον browser (χρήστη).  

    Αν το url δεν συμπίπτει με το κάποιο route ,τότε εμφανίζεται Error 404 . Για να συνδέσω την Python εφαρμογή μου με τον apache server χρησιμοποίησα το module_wsgi .  

    

## D. Website  

Παρακάτω  παρουσιάζονται τα αποτελέσματα των δυο GET αιτημάτων  του browser : 

 

1) Στον route ‘ / ‘
   
![map_location](https://github.com/TZOYRMANAS/Bluetooth_Device_LocationMap--/assets/79106646/478ede8e-e6b4-4b44-a918-4dcd662b2679)

3) Στον route ‘get_data’  

          
![data](https://github.com/TZOYRMANAS/Bluetooth_Device_LocationMap--/assets/79106646/10bd2399-a915-4942-8f99-5d94259211f6)




  
   ## Πηγές - Website 

 

### Leaflet - OpenStreetMap 

 - Libraries to create a map  

-  leafletjs ,  leafletjs_tutiorial  

### Json file  

  - Read json file in javascript           

                                    
### web frameworks (Flask) 

- Web frameworks in python  

- Routing in Flask 

- Render-html-file in flask   

- Jsonify  

           

 

### Apache2 Server – mod_wsgi  

- Install and configure apache2 server   

 
           

 

 


